<?xml version="1.0" encoding="UTF-8"?>
<wdkModel>

    <!-- ************ -->
    <!-- questionSets -->
    <!-- ************ -->
    
    <!-- 
    A question is "a query that returns a list of records."  (Regular queries 
    return columns and rows.)  They are formed by pairing a query with a
    record class.  The query must be one that returns one column containing
    a list of primary keys.  The record class must be one that expects as
    a primary key the type of key returned by the query.
    
    A question set is a grouping of questions.  It may be used in the
    user interface to present the enclosed questions in one choice box.  
    -->


    <!-- questions that return RNA records -->


    <questionSet name="RnaQuestions"
                 displayName="Queries to find RNAs">

        <description>
          These queries find RNAs
        </description>

        <question name="ByNumSeqs" 
                  displayName="Find RNAs by number of assembly sequences" 
                  queryRef="RnaIds.ByNumSeqs"
                  recordClassRef="RnaRecordClasses.RnaRecordClass">
            <description>
                Find RNAs from a given organism that contain more than a 
                specified number of ESTs in their assembly.
            </description>

            <attributesList summary="assembly_consistency,contains_mrna,overview,sequence,taxonLink,score"
                           sorting="score desc"/>

            <dynamicAttributes>
              <columnAttribute name="score" displayName="Blast score"/>
              <linkAttribute name="taxonLink2" displayName="Taxon2">
                 <displayText>
                    <![CDATA[$$taxon_name$$]]>
                 </displayText>
                 <url>
                    <![CDATA[@TAXON_URL@]]>
                 </url>
              </linkAttribute>

              <textAttribute name="overview2" displayName="Overview2" truncateTo="80">
                <text>
                    RNA $$primaryKey$$ is from $$taxon_name$$.
                </text>
              </textAttribute>

            </dynamicAttributes>
        </question>

        <question name="ByDbESTLib" 
                  displayName="Find RNAs by number of EST libs"
                  queryRef="RnaIds.ByDbESTLib" 
                  recordClassRef="RnaRecordClasses.RnaRecordClass">
            <description>
                Find RNAs with required assembly consistency score that
                contain ESTs from more than a specified number of libraries.
            </description>
        </question>

        <question name="Ortholog" 
                  displayName="Find Orthologous RNAs"
                  queryRef="RnaIds.Ortholog" 
                  recordClassRef="RnaRecordClasses.RnaRecordClass">
            <description>
                Find Orthologous RNAs by a previous query result
            </description>
        </question>

    </questionSet>

    <!-- questions that return EST records -->
    <questionSet name="EstQuestions"
                 displayName="Queries to find ESTs">

        <description>
          These queries find ESTs
        </description>

        <question name="ByEstLib" 
                  displayName="Find ESTs by originating library" 
                  queryRef="EstIds.ByEstLib" 
                  recordClassRef="EstRecordClasses.EstRecordClass">
            <description>
                Find ESTs from a given library
            </description>
        </question>

        <question name="EstNullAttributes" 
                  displayName="Question that will return some controversial ESTs!"
                  queryRef="EstIds.NullAttributeEsts" 
                  recordClassRef="EstRecordClasses.EstRecordClass">

             <description>
                  Question that will return ESTs, some of which have null values for their atttributes
             </description>
        </question>

    </questionSet>

    <!-- questions for testing dynamic attributes -->
    <questionSet name="DynamicAttributeQuestions" 
                 displayName="Questions for use in Dynamic Attributes test">

        <description>
          These queries find RNAs by BLAST similarities
        </description>
                 
        <question name="BySimilarity"
                  displayName="Find RNAs by blast similarity to input sequences" 
                  queryRef="RnaIds.BySimilarity"
                  recordClassRef="RnaRecordClasses.RnaRecordClass">
            <description>
                Find RNAs by similarity to input sequence.
            </description>

            <attributesList summary="na_sequence_id,overview,sequence,Header,TabularRow,Alignment,Footer,taxon_name"
                           sorting="na_sequence_id asc"/>

            <dynamicAttributes>
              <columnAttribute name="TabularRow" displayName="Blast summary"/>
              <columnAttribute name="Alignment" displayName="Blast alignment"/>
              <columnAttribute name="Header" displayName="Blast header"/>
              <columnAttribute name="Footer" displayName="Blast footer"/>
            </dynamicAttributes>
        </question>
    </questionSet>

    <!-- questions for use in nestedRecords and nestedRecordLists -->
    <questionSet name="NestedRecordQuestions" 
                 displayName="Questions for use in NestedRecords" 
                 internal="true">
        
         <question name="RNA" 
                   queryRef="RnaIds.EstParent" 
                   recordClassRef="RnaRecordClasses.RnaRecordClass" 
                   displayName="Nested Record RNA">
              <description> Question that returns the RNA that belongs to the given EST; for use in a Nested Record </description>
         </question>

         <question name="ESTs" 
                   queryRef="RnaTables.SimpleEstIds" 
                   recordClassRef="EstRecordClasses.EstRecordClass" displayName="Nested Record ESTs">
              <description> Question that returns ESTs that belong to the given RNA; for use in a Nested Record List </description>
         </question>

    </questionSet>

    <!-- questions for use in data dumps -->
    <questionSet displayName="Questions for use in data dumps" 
                 internal="true" 
                 name="DataDumpQuestions">

        <description>
            These questions are for data dumps
        </description>

        <question displayName="Find all RNAs" 
                  name="RnaGff" 
                  queryRef="DataDumpQueries.RnaGff" 
                  recordClassRef="DataDumpRecordClasses.RnaGff">
            <description>This question find all RNAs to dump in GFF format</description>
        </question>

    </questionSet>


    <!-- questions that return Zip records -->
    <questionSet name="ZipQuestions"
                 displayName="Queries to find Zips"
                 internal="true">

        <description>
          These queries find Zips (City, State).
        </description>

        <question name="ZipByZipCode" 
                  displayName="Look up Zip by zip code" 
                  queryRef="ZipIds.ByZipCode" 
                  recordClassRef="ZipRecordClasses.ZipRecordClass">
            <description>
                Look up a zip addresses by their zip code.
            </description>
        </question>

        <question name="ZipsByAreaCode" 
                  displayName="Look up Zips by area code" 
                  queryRef="ZipIds.ByAreaCode" 
                  recordClassRef="ZipRecordClasses.ZipRecordClass">
            <description>
                Find zip addresses by their area code.
            </description>
        </question>
    </questionSet>

    <!-- Definitions of Xml sources -->

    <!-- xml question sets -->
    <xmlQuestionSet name="XmlQuestions"
                    displayName="Data contents from XML data sources">

        <description>
          Data contents from XML data sources
        </description>

        <xmlQuestion name="NewsQuestion" 
                     displayName="Sample News" 
                     recordClassRef="XmlRecordClasses.NewsRecord"
                     xmlDataURL="news.xml">
            <description>
                Retrieve news from XML data source
            </description>
        </xmlQuestion>

        <xmlQuestion name="CNNNewsQuestion" 
                  displayName="News about PlasmoDB" 
                  recordClassRef="XmlRecordClasses.NewsRecord"
                  xmlDataURL="http://rss.cnn.com/rss/cnn_topstories.rss"
                  xslURL="rss.xsl">
            <description>
                Retrieve CNN headline news from XML data source, and converted it on the fly
            </description>
        </xmlQuestion>
 
        <xmlQuestion name="ResourceQuestion" 
                  displayName="Sample Data Sources" 
                  recordClassRef="XmlRecordClasses.ResourceRecord"
                  xmlDataURL="sampleResources.xml"
                  xslURL="resources2records.xsl">
            <description>
                Sample Data Sources
            </description>
        </xmlQuestion>

    </xmlQuestionSet>

</wdkModel>